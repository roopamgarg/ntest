{"ast":null,"code":"import { GET_QUESTIONS_FAILURE, GET_QUESTIONS_REQUEST, GET_QUESTIONS_SUCCESS, GET_QUESTION_DESCRIPTION_FAILURE, GET_QUESTION_DESCRIPTION_REQUEST, GET_QUESTION_DESCRIPTION_SUCCESS, ASK_QUESTION_FAILURE, ASK_QUESTION_SUCCESS, ASK_QUESTION_REQUEST, ADD_REPLY_FAILURE, ADD_REPLY_SUCCESS, ADD_REPLY_REQUEST, EDIT_REPLY } from \"./questionTypes\";\nimport { message } from \"antd\";\nimport API_URL from \"../helpers/API_URL\";\nimport axios from \"axios\";\nimport { getHeaders } from \"../helpers/getHeaders\";\nimport React from \"react\";\nimport Router from \"next/router\";\n\nconst getQuestionRequest = () => ({\n  type: GET_QUESTIONS_REQUEST\n});\n\nconst getQuccess = res => ({\n  type: GET_QUESTIONS_SUCCESS,\n  payload: res\n});\n\nconst getQuestionFailure = err => ({\n  type: GET_QUESTIONS_FAILURE,\n  payload: err\n});\n\nconst getCurrentQuestionReq = () => ({\n  type: GET_QUESTION_DESCRIPTION_REQUEST\n});\n\nconst getCurrentQuestionSuccess = res => ({\n  type: GET_QUESTION_DESCRIPTION_SUCCESS,\n  payload: res\n});\n\nconst getCurrentQuestionFailure = err => ({\n  type: GET_QUESTION_DESCRIPTION_FAILURE,\n  payload: err\n});\n\nconst askQuestionRequest = () => ({\n  type: ASK_QUESTION_REQUEST\n});\n\nconst askQuestionSuccess = () => ({\n  type: ASK_QUESTION_SUCCESS\n});\n\nconst askQuestionFailure = () => ({\n  type: ASK_QUESTION_FAILURE\n});\n\nconst addReplyRequest = () => ({\n  type: ADD_REPLY_REQUEST\n});\n\nconst addReplySuccess = () => ({\n  type: ADD_REPLY_SUCCESS\n});\n\nconst addReplyFailure = () => ({\n  type: ADD_REPLY_FAILURE\n});\n\nconst editReply = res => ({\n  type: EDIT_REPLY,\n  payload: res\n});\n\nexport const getQuestions = async (search, pageNo, pageSize) => {\n  search = typeof search === \"string\" ? search : \"\";\n  return async function (dispatch) {\n    dispatch(getQuestionRequest());\n\n    try {\n      let response = await axios.get(`${API_URL}question/search?search=${search}`);\n      response = response.data;\n      return dispatch(getQuestionSuccess(response));\n    } catch (error) {\n      message.error(error.response.data.message);\n      return dispatch(getQuestionFailure(error.message));\n    }\n  };\n};\nexport const getQuestionById = id => {\n  console.log(\"hii\");\n  id = typeof id === \"string\" && id.length > 0 ? id : false;\n\n  if (!id) {\n    return function (dispatch) {\n      message.error(\"Invalid ID\");\n      dispatch(getCurrentQuestionFailure(\"Invalid ID\"));\n    };\n  }\n\n  return async function (dispatch) {\n    try {\n      dispatch(getCurrentQuestionReq());\n      let response = await axios.get(`${API_URL}question/search/${id}`);\n      response = response.data;\n      return dispatch(getCurrentQuestionSuccess(response));\n    } catch (error) {\n      console.log(error);\n      message.error(error.response.data.message);\n      dispatch(getCurrentQuestionFailure(error.message));\n      return response;\n    }\n  };\n};\nexport const voteQuestion = (id, type, history) => {\n  console.log(id, type);\n  id = typeof id === \"string\" && id.length > 0 ? id : false;\n  type = typeof type === \"boolean\" ? type.toString() : false;\n\n  if (!id || !type) {\n    return function (dispatch) {\n      message.error(\"Missing Required Fields\"); // dispatch(getCurrentQuestionFailure(\"Missing Required Fields\"));\n    };\n  }\n\n  const types = {\n    true: \"upvote\",\n    false: \"downvote\"\n  };\n  return function (dispatch) {\n    axios.post(`${API_URL}question/${types[type]}/${id}`, {}, getHeaders()).then(response => {\n      const res = response.data;\n      dispatch(getCurrentQuestionSuccess(res));\n    }).catch(error => {\n      console.log(error);\n\n      if (error.response.status === 401) {\n        Router.push(\"/login\");\n      }\n\n      message.error(error.response.data.message);\n    });\n  };\n};\nexport const askQuestion = data => {\n  data.title = typeof data.title === \"string\" && data.title.trim().length > 0 ? data.title.trim() : false;\n  data.description = typeof data.description === \"string\" && data.description.trim().length > 0 ? data.description.trim() : false;\n  data.tags = Array.isArray(data.tags) && data.tags.length > 0 ? data.tags : false;\n\n  if (!(data.title && data.description && data.tags)) {\n    return function (dispatch) {\n      dispatch(askQuestionFailure());\n    };\n  }\n\n  const body = {\n    title: data.title,\n    description: data.description,\n    tags: data.tags\n  };\n  return async function (dispatch) {\n    try {\n      dispatch(askQuestionRequest());\n      const response = await axios.post(`${API_URL}question/ask`, body, getHeaders());\n      dispatch(askQuestionSuccess());\n      getQuestions(\"\")(dispatch);\n    } catch (error) {\n      console.log(error);\n      message.error(error.response.data.message);\n      dispatch(askQuestionFailure());\n    }\n  };\n};\nexport const voteReply = (id, type, history) => {\n  id = typeof id === \"string\" && id.length > 0 ? id : false;\n  type = typeof type === \"boolean\" ? type.toString() : false;\n\n  if (!id || !type) {\n    return function (dispatch) {\n      message.error(\"Missing Required Fields\"); // dispatch(getCurrentQuestionFailure(\"Missing Required Fields\"));\n    };\n  }\n\n  const types = {\n    true: \"upvote\",\n    false: \"downvote\"\n  };\n  return function (dispatch) {\n    axios.post(`${API_URL}reply/${types[type]}/${id}`, {}, getHeaders()).then(response => {\n      const res = response.data;\n      dispatch(editReply(res));\n    }).catch(error => {\n      console.log(error.response);\n\n      if (error.response.status === 401) {\n        Router.push(\"/login\");\n      }\n\n      message.error(error.response.data.message);\n    });\n  };\n};\nexport const addReply = data => {\n  data.text = typeof data.text === \"string\" && data.text.trim().length > 0 ? data.text.trim() : false;\n  data.questionId = typeof data.questionId === \"string\" && data.questionId.trim().length > 0 ? data.questionId.trim() : false;\n\n  if (!(data.text && data.questionId)) {\n    return function (dispatch) {\n      message.error(\"Missing Required Fields\");\n      dispatch(askReplyFailure());\n    };\n  }\n\n  const body = {\n    text: data.text,\n    questionId: data.questionId\n  };\n  return async function (dispatch) {\n    try {\n      dispatch(addReplyRequest());\n      await axios.post(`${API_URL}reply/`, body, getHeaders());\n      message.success(\"Reply Added Successfully\");\n      dispatch(addReplySuccess());\n      getQuestionById(data.questionId)(dispatch);\n    } catch (error) {\n      console.log(error);\n      message.error(error.response.data.message);\n      dispatch(addReplyFailure());\n    }\n  };\n};","map":{"version":3,"sources":["/home/roopam/Videos/redcarpet/stack-overflow-clone/next-app/redux/question/questionActions.js"],"names":["GET_QUESTIONS_FAILURE","GET_QUESTIONS_REQUEST","GET_QUESTIONS_SUCCESS","GET_QUESTION_DESCRIPTION_FAILURE","GET_QUESTION_DESCRIPTION_REQUEST","GET_QUESTION_DESCRIPTION_SUCCESS","ASK_QUESTION_FAILURE","ASK_QUESTION_SUCCESS","ASK_QUESTION_REQUEST","ADD_REPLY_FAILURE","ADD_REPLY_SUCCESS","ADD_REPLY_REQUEST","EDIT_REPLY","message","API_URL","axios","getHeaders","React","Router","getQuestionRequest","type","getQuccess","res","payload","getQuestionFailure","err","getCurrentQuestionReq","getCurrentQuestionSuccess","getCurrentQuestionFailure","askQuestionRequest","askQuestionSuccess","askQuestionFailure","addReplyRequest","addReplySuccess","addReplyFailure","editReply","getQuestions","search","pageNo","pageSize","dispatch","response","get","data","getQuestionSuccess","error","getQuestionById","id","console","log","length","voteQuestion","history","toString","types","true","false","post","then","catch","status","push","askQuestion","title","trim","description","tags","Array","isArray","body","voteReply","addReply","text","questionId","askReplyFailure","success"],"mappings":"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","sourcesContent":["import {\n  GET_QUESTIONS_FAILURE,\n  GET_QUESTIONS_REQUEST,\n  GET_QUESTIONS_SUCCESS,\n  GET_QUESTION_DESCRIPTION_FAILURE,\n  GET_QUESTION_DESCRIPTION_REQUEST,\n  GET_QUESTION_DESCRIPTION_SUCCESS,\n  ASK_QUESTION_FAILURE,\n  ASK_QUESTION_SUCCESS,\n  ASK_QUESTION_REQUEST,\n  ADD_REPLY_FAILURE,\n  ADD_REPLY_SUCCESS,\n  ADD_REPLY_REQUEST,\n  EDIT_REPLY\n} from \"./questionTypes\";\nimport { message } from \"antd\";\nimport API_URL from \"../helpers/API_URL\";\nimport axios from \"axios\";\nimport { getHeaders } from \"../helpers/getHeaders\";\nimport React from \"react\";\nimport Router from \"next/router\";\nconst getQuestionRequest = () => ({\n  type: GET_QUESTIONS_REQUEST\n});\nconst getQuccess = res => ({\n  type: GET_QUESTIONS_SUCCESS,\n  payload: res\n});\nconst getQuestionFailure = err => ({\n  type: GET_QUESTIONS_FAILURE,\n  payload: err\n});\n\nconst getCurrentQuestionReq = () => ({\n  type: GET_QUESTION_DESCRIPTION_REQUEST\n});\n\nconst getCurrentQuestionSuccess = res => ({\n  type: GET_QUESTION_DESCRIPTION_SUCCESS,\n  payload: res\n});\n\nconst getCurrentQuestionFailure = err => ({\n  type: GET_QUESTION_DESCRIPTION_FAILURE,\n  payload: err\n});\nconst askQuestionRequest = () => ({\n  type: ASK_QUESTION_REQUEST\n});\nconst askQuestionSuccess = () => ({\n  type: ASK_QUESTION_SUCCESS\n});\nconst askQuestionFailure = () => ({\n  type: ASK_QUESTION_FAILURE\n});\n\nconst addReplyRequest = () => ({\n  type: ADD_REPLY_REQUEST\n});\nconst addReplySuccess = () => ({\n  type: ADD_REPLY_SUCCESS\n});\nconst addReplyFailure = () => ({\n  type: ADD_REPLY_FAILURE\n});\nconst editReply = res => ({\n  type: EDIT_REPLY,\n  payload: res\n});\n\nexport const getQuestions = async (search, pageNo, pageSize) => {\n  search = typeof search === \"string\" ? search : \"\";\n  return async function(dispatch) {\n    dispatch(getQuestionRequest());\n    try {\n      let response = await axios.get(\n        `${API_URL}question/search?search=${search}`\n      );\n      response = response.data;\n\n      return dispatch(getQuestionSuccess(response));\n    } catch (error) {\n      message.error(error.response.data.message);\n      return dispatch(getQuestionFailure(error.message));\n    }\n  };\n};\n\nexport const getQuestionById = id => {\n  console.log(\"hii\");\n  id = typeof id === \"string\" && id.length > 0 ? id : false;\n  if (!id) {\n    return function(dispatch) {\n      message.error(\"Invalid ID\");\n      dispatch(getCurrentQuestionFailure(\"Invalid ID\"));\n    };\n  }\n  return async function(dispatch) {\n    try {\n      dispatch(getCurrentQuestionReq());\n      let response = await axios.get(`${API_URL}question/search/${id}`);\n      response = response.data;\n      return dispatch(getCurrentQuestionSuccess(response));\n    } catch (error) {\n      console.log(error);\n      message.error(error.response.data.message);\n      dispatch(getCurrentQuestionFailure(error.message));\n      return response;\n    }\n  };\n};\n\nexport const voteQuestion = (id, type, history) => {\n  console.log(id, type);\n  id = typeof id === \"string\" && id.length > 0 ? id : false;\n  type = typeof type === \"boolean\" ? type.toString() : false;\n  if (!id || !type) {\n    return function(dispatch) {\n      message.error(\"Missing Required Fields\");\n      // dispatch(getCurrentQuestionFailure(\"Missing Required Fields\"));\n    };\n  }\n  const types = {\n    true: \"upvote\",\n    false: \"downvote\"\n  };\n  return function(dispatch) {\n    axios\n      .post(`${API_URL}question/${types[type]}/${id}`, {}, getHeaders())\n      .then(response => {\n        const res = response.data;\n        dispatch(getCurrentQuestionSuccess(res));\n      })\n      .catch(error => {\n        console.log(error);\n        if (error.response.status === 401) {\n          Router.push(\"/login\");\n        }\n        message.error(error.response.data.message);\n      });\n  };\n};\n\nexport const askQuestion = data => {\n  data.title =\n    typeof data.title === \"string\" && data.title.trim().length > 0\n      ? data.title.trim()\n      : false;\n  data.description =\n    typeof data.description === \"string\" && data.description.trim().length > 0\n      ? data.description.trim()\n      : false;\n  data.tags =\n    Array.isArray(data.tags) && data.tags.length > 0 ? data.tags : false;\n  if (!(data.title && data.description && data.tags)) {\n    return function(dispatch) {\n      dispatch(askQuestionFailure());\n    };\n  }\n\n  const body = {\n    title: data.title,\n    description: data.description,\n    tags: data.tags\n  };\n  return async function(dispatch) {\n    try{\n    dispatch(askQuestionRequest());\n    const response = await axios.post(`${API_URL}question/ask`, body, getHeaders())\n        dispatch(askQuestionSuccess());\n         getQuestions(\"\")(dispatch);\n      }\n      catch(error){\n        console.log(error)\n        message.error(error.response.data.message);\n        dispatch(askQuestionFailure());\n      }\n  };\n};\n\nexport const voteReply = (id, type, history) => {\n  id = typeof id === \"string\" && id.length > 0 ? id : false;\n  type = typeof type === \"boolean\" ? type.toString() : false;\n  if (!id || !type) {\n    return function(dispatch) {\n      message.error(\"Missing Required Fields\");\n      // dispatch(getCurrentQuestionFailure(\"Missing Required Fields\"));\n    };\n  }\n  const types = {\n    true: \"upvote\",\n    false: \"downvote\"\n  };\n  return function(dispatch) {\n    axios\n      .post(`${API_URL}reply/${types[type]}/${id}`, {}, getHeaders())\n      .then(response => {\n        const res = response.data;\n        dispatch(editReply(res));\n      })\n      .catch(error => {\n        console.log(error.response);\n        if (error.response.status === 401) {\n          Router.push(\"/login\");\n        }\n        message.error(error.response.data.message);\n      });\n  };\n};\n\nexport const addReply = data => {\n  data.text =\n    typeof data.text === \"string\" && data.text.trim().length > 0\n      ? data.text.trim()\n      : false;\n  data.questionId =\n    typeof data.questionId === \"string\" && data.questionId.trim().length > 0\n      ? data.questionId.trim()\n      : false;\n\n  if (!(data.text && data.questionId)) {\n    return function(dispatch) {\n      message.error(\"Missing Required Fields\");\n      dispatch(askReplyFailure());\n    };\n  }\n\n  const body = {\n    text: data.text,\n    questionId: data.questionId\n  };\n  return async function(dispatch) {\n    try {\n      dispatch(addReplyRequest());\n      await axios.post(`${API_URL}reply/`, body, getHeaders());\n      message.success(\"Reply Added Successfully\");\n      dispatch(addReplySuccess());\n      getQuestionById(data.questionId)(dispatch);\n    } catch (error) {\n      console.log(error)\n      message.error(error.response.data.message);\n      dispatch(addReplyFailure());\n    }\n  };\n};\n"]},"metadata":{},"sourceType":"module"}